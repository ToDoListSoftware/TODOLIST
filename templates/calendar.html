{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="shortcut icon" href="{% static "images/todo.png" %}" type="image/x-icon"/>
	<link rel="stylesheet" href="{% static "css/index.css" %}" type="text/css"/>
    <link rel="stylesheet" href="{% static "JS/calendar_js.js" %}"/>
    <script src="{% static "JS/calendar_js.js" %}"></script>
    <style>
        .empty{
            width:100px;
            height:60px;
        }
        .current{
            width:100px;
            height:60px;
            border: 1px solid #ccc;
            background-color: #a5d4f9;
        }
        .day{
            width:100px;
            height:60px;
            border: 1px solid #ccc;
        }

    </style>
	<title>日历 | ToDo List</title>

	<script>
        function showdel(){
            var btn = document.getElementsByClassName('delbtn');
            for(var i=0; i<btn.length; i++){
                btn[i].style.display = 'block';
            }
        }
        function hidedel(){
            var btn = document.getElementsByClassName('delbtn');
            for(var i=0; i<btn.length; i++){
                btn[i].style.display = 'none';
            }
        }
		function showdropdown(){
			var a = document.getElementById('user_drop_down');
			a.style.display = 'block';
		}
		function hidedropdown(){
			var a = document.getElementById('user_drop_down');
			a.style.display = 'none';
		}
        function changetag(){
            var box = document.getElementsByClassName('check');
            for(var i=0; i<box.length; i++){
                if (box[i].checked == true)
                {
                    var f = document.getElementsByClassName('formid');
                    f[i].submit();
                }
            }
        }
        function del(){
            var bts = document.getElementsByClassName('delbtn');
            for(var i=0; i<bts.length; i++){
                if (box[i].checked == true)
                {
                    var f = document.getElementsByClassName('formid2');
                    f[i].submit();
                }
            }
        }



	</script>
</head>




<body>
	<!--顶部-->
	<div id="top">
		<div id="top_bar">

			<div class="l-header">
                <div id="logo2"><a href="/TodayTask/{{ uid }}"><img src="{% static "images/logo2.png" %}" /></a></div>
				<div id="add-task-btn" class="rt" onclick="window.location.href='/AddTask/uid{{ uid }}option1/';"><img src="{% static "images/plus1.png" %}" /></div>
            </div>
            <div class="r-header" >
				<div id="avatar"></div>
            	<div class="username" onclick="showdropdown()" style="cursor:pointer"><div id="name" style="display:inline-block;"><a style="color:white;">欢迎，{{ uname }}</a></div>
				</div>
				<div class="top_bar_drop_down clr" id="user_drop_down" onmouseover="showdropdown()" onmouseout="hidedropdown()">
					<ul>
							<li><a style="cursor:pointer;" href="/UserDetail/{{ uid }}">个人信息</a></li>
							<li><a style="cursor:pointer;">常见问题</a></li>
							<li><a style="cursor:pointer;" href="/logout/{{ uid }}">退出账号</a></li>
						</ul>
					</div>

			</div>
    	</div>
	</div>

	<!--侧边栏-->
	<div class="sidebar">
		<ul>
			<li>
				<h3>收 藏</h3>
				<ul>
					<li onclick="window.location.href='/CollectedTask/{{ uid }}';"><div id="pic0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 收集箱</div></li>
				</ul>
			</li>
			<li>
				<h3>聚 焦</h3>
				<ul>
					<li style="background-color: #F0F0F0;" onclick="window.location.href='/TodayTask/{{ uid }}';"><div id="pic1" class="clr"></div>今日待办&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({{ len }})</li>
					<li onclick="window.location.href='/curriculum/{{ uid }}';"><div id="pic2"></div>课程表</li>
					<li onclick="window.location.href='/Calendar/{{ uid }}';"><div id="pic3"></div>日程</li>
					<li onclick="window.location.href='/maybe/{{ uid }}';"><div id="pic4"></div>将来/也许</li>
					<li onclick="window.location.href='/appointment/{{ uid }}';"><div id="pic5"></div>预约</li>
				</ul>
			</li>
			<li>
				<h3>所有情境  <div><a href="/AddSituationpre/{{ uid }}">+</a></div></h3>
				<ul>
                    {% ifequal flag1 0 %}
                         <li>无</li>
                    {% else %}
                        {% for situ in result2 %}
                            <li onclick="window.location.href='/SituationTask/uid{{ uid }}sid{{ situ.sid }}/';">{{ situ.stitle }}</li>
                        {% endfor %}
                    {% endifequal %}
				</ul>
			</li>
			<li>
				<h3>完 毕</h3>
				<ul>
					<li onclick="window.location.href='/finished/{{ uid }}';">已完成</li>
					<li onclick="window.location.href='/deleted/{{ uid }}';">垃圾箱</li>
				</ul>
			</li>
		</ul>
	</div>

	<!--主体-->
	<div id="content">
        <br/><br/><br/><br/>
	    <div id="calendar">
			<a href= "/Calendar/{{ uid }}/{{ year }}/{{ month }}/prev/" style="font-size:16px;position:relative;left:-350px;">&lt;&lt; Prev</a>
<a style="font-size:16px;position:relative;left:350px;" href= "/Calendar/{{ uid }}/{{ year }}/{{ month }}/next/">Next &gt;&gt;</a>

<h4 style="font-size: 20px;">{{ year }}年{{ month }}月 </h4><br/><br/>

<div class="month" style="border: 2px solid #ccc;width:800px;margin:auto auto;">
    <table>

    <tr>
        <td class="empty">Mon</td>
        <td class="empty">Tue</td>
        <td class="empty">Wed</td>
        <td class="empty">Thu</td>
        <td class="empty">Fri</td>
        <td class="empty">Sat</td>
        <td class="empty">Sun</td>
    </tr>

    {% for week in month_days %}
        <tr>
        {% for day, entries, current in week %}

            <!-- TD style: empty | day | current; onClick handler and highlight  -->
            <td class= {% if day == 0 %}"empty"{% endif %}{% if day != 0 and not current %}"day"{% endif %}{% if day != 0 and current %}"current"{% endif %}{% if day != 0 %}onmouseover="this.bgColor='#eeeeee';"onmouseout="this.bgColor='white';"{% endif %} >

            <!-- Day number and entry snippets -->
            <div style="position: relative;">
            {% if day != 0 %}
                <div style="display:inline-block;position: absolute;top:-25px;left:5px;width:15px;height:15px;">{{ day }}</div>
               <div style="display: inline-block;position: absolute;top:-20px;left:5px;;"> {% for entry in entries %}
                    <br/>
                        {% ifequal entry.pri 2 %}
                        <a href="/TaskDetail/id{{ entry.id }}uid{{ uid }}" style="color:red;">{{ entry.title}}</a>
                        {% endifequal %}
                        {% ifequal entry.pri 1 %}
                        <a href="/TaskDetail/id{{ entry.id }}uid{{ uid }}" style="color:orange;">{{ entry.title}}</a>
                        {% endifequal %}
                        {% ifequal entry.pri 0%}
                        <a href="/TaskDetail/id{{ entry.id }}uid{{ uid }}">{{entry.title}}</a>
                        {% endifequal %}
                {% endfor %}</div>
            {% endif %}
            </div>
            </td>
        {% endfor %}
        </tr>
    {% endfor %}
    </table>

    <div class="clear"></div>
</div>
		</div>



	</div>








</body>
</html>